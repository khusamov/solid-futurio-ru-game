
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Example</title>
	<style>body { margin: 0 }</style>
</head>
<body>
<canvas width="800" height="400"></canvas>
<input type="range" min="0.1" max="2" value="1" step="0.1" onchange="slomo = parseFloat(this.value); slowStep = slomo * step" style="position: absolute; bottom: 0; left: 50%; width: 20%; transform: scale(2.5) translate3d(-50%, 0, 0); transform-origin: 0 100%;">
<script>
	// main functions
	let canvas = document.querySelector('canvas'),
		ctx = canvas.getContext('2d'),
		rectSize = 100,
		direction = 1,
		posX = rectSize * 3,
		posY = 70,
		angle = 0,
		prevAngle = angle,
		prevX = posX;

	let update = (step) => {
		prevX = posX;
		prevAngle = angle;

		posX += 10 * direction;
		angle += 5 * direction;
		angle %= 360;

		if (posX + rectSize > canvas.width) direction = -1;
		else if (posX - rectSize * 3 < 0) direction = 1;
	};

	let drawRect = (x, y, rotateAngle) => {
		ctx.save();
		ctx.translate(x, y);
		ctx.rotate(rotateAngle * Math.PI / 180);
		ctx.translate(-rectSize / 2, -rectSize / 2);
		ctx.fillStyle = '#0d0';
		ctx.fillRect(0, 0, rectSize, rectSize);
		ctx.restore();
	};

	let lerp = (start, finish, time) => {
		return start + (finish - start) * time;
	};

	let render = (dt) => {
		// clear canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);

		// draw game state rect
		drawRect(posX, posY, angle);

		// draw rect using LERP
		let smoothY = posY + rectSize * 2,
			smoothX = lerp(prevX, posX, dt),
			smoothAngle = lerp(prevAngle, angle, dt);
		drawRect(smoothX, smoothY, smoothAngle);

		// add info labels
		ctx.font = "30px Arial";
		ctx.fillText("update @10fps", 0, posY + 15);
		ctx.fillText("render @60fps", 0, posY + rectSize * 2 + 15);
	};

	// game loop
	let last = performance.now(),
		slomo = 1, // slow motion factor
		fps = 10,
		step = 1 / fps,
		slowStep = slomo * step,
		dt = 0,
		now;

	let frame = () => {
		now = performance.now();
		dt = dt + (now - last) / 1000;
		while(dt > slowStep) {
			dt = dt - slowStep;
			update(step);
		}
		last = now;

		render(dt / slomo * fps);
		requestAnimationFrame(frame);
	}

	requestAnimationFrame(frame);
</script>
</body>
</html>
